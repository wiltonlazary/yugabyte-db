<div class="feedback_widget">
  
  <a class="btn-close"><i class="fas fa-close"></i></a>
  <div class="submit-replace">
    <div class="title">Help us improve our docs</div>
    <div class="form-container">
      <form class="row" id="feedbackForm">
        <div class="col-6 form-group form-group-select">
          <label for="exampleInputEmail1">Email address</label>
          <input type="hidden" id="action_type" name="action_type" value="docs-feedback">
          <input type="hidden" id="action_payload_from" name="action_payload[from]" value='footer'>
          <input type="hidden" id="action_payload_feedback_url" name="action_payload[feedback_url]" value='{{ .URL }}'>
          <select class="form-control" id="feedback_subject" name="action_payload[feedback_subject]">
            <option value="Incorrect info">Incorrect info</option>
            <option value="Unclear info">Unclear info</option>
            <option value="Not detailed enough">Not detailed enough</option>
            <option value="Needs more examples">Needs more examples</option>
            <option value="Typo">Typo</option>
            <option value="Something's broken">Something's broken</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="col-6 form-group">
          <input type="email" class="form-control" id="feedback_email" name="email" placeholder="Your email for additional support" aria-describedby="emailHelp" >
        </div>
        <div class="col-12 form-group">
          <textarea type="text" class="form-control" id="action_payload_feedback_message" name="action_payload[feedback_message]"  placeholder="These instructions don't work"></textarea>
        </div>
        <button type="submit" class="btn cta-button">Submit</button>
      </form>
    </div>
  </div>
</div>


<script>
      document.addEventListener("DOMContentLoaded", function() {
        "use strict";
        const root = $('.feedback_widget');
        const caption = $('.feedback_widget .caption');
        const buttons = $('.feedback_widget .buttons');
        const close = $('.feedback_widget a.btn-close');
        const feedback_type = $('.feedback_widget #feedback_subject');
        const textarea = $('.feedback_widget textarea');

        feedback_type.on('change', (e) => {
          const optionSelectedIndex = $(e.currentTarget)[0].selectedIndex;
          switch (optionSelectedIndex) {
            case 0:
              textarea.attr("placeholder","These instructions don't work");
              break;

            case 1:
              textarea.attr("placeholder","I don't understand how to...");
              break;

            case 2:
              textarea.attr("placeholder","I can't find info about...");
              break;

            case 3:
              textarea.attr("placeholder","You'd be better to have example of...");
              break;

            case 4:
              textarea.attr("placeholder","There's a small typo in...");
              break;

            case 5:
              textarea.attr("placeholder","This link/button/input is broken.");
              break;

            case 6:
              textarea.attr("placeholder","I just want to share with you that...");
              break;
          
            default:
              break;
          }
        });

        close.on('click', (e) => {
          root.removeClass('active').css('top','').css('position','');
          $(document).trigger('feedback:reset');
        });

        if ($('#feedbackForm').length) {
          setupRegistrationForm('#feedbackForm', 'Thanks for your feedback!');
        }
        
      });
    
  </script>